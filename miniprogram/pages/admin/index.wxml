<!--pages/admin/index.wxml-->
<view class="container">
	<view class="tabs">
		<view class="tab {{tab==='activities'?'active':''}}" data-tab="activities" bindtap="switchTab">æ´»åŠ¨ç®¡ç†</view>
		<view class="tab {{tab==='members'?'active':''}}" data-tab="members" bindtap="switchTab">æˆå‘˜ç®¡ç†</view>
		<view class="tab {{tab==='banners'?'active':''}}" data-tab="banners" bindtap="switchTab">è½®æ’­ç®¡ç†</view>
	</view>

	<block wx:if="{{tab==='activities'}}">
		<view class="toolbar">
			<button class="primary" bindtap="openCreateActivity" style="width: 650rpx;">æ–°å»ºæ´»åŠ¨</button>
		</view>
		<view class="list">
			<block wx:for="{{activities}}" wx:key="_id">
				<view class="item card">
					<view class="row between">
						<view class="title ellipsis">{{item.title}}</view>
						<view class="badge {{item.status==='è¿›è¡Œä¸­'?'ing':(item.status==='å·²ç»“æŸ'?'over':'notyet')}}">{{item.status}}</view>
					</view>
					<view class="meta">ğŸ• {{item.startTime}}</view>
					<view class="meta id-row mono">IDï¼š{{item._id}}
						<button size="mini" class="copy" bindtap="copyId" data-id="{{item._id}}">å¤åˆ¶ID</button>
					</view>
					<view class="actions">
						<button size="mini" bindtap="toEditActivity" data-id="{{item._id}}">ç¼–è¾‘</button>
						<button size="mini" class="danger" bindtap="deleteActivity" data-id="{{item._id}}">åˆ é™¤</button>
					</view>
				</view>
			</block>
		</view>
	</block>

	<block wx:if="{{tab==='members'}}">
		<view class="list">
			<block wx:for="{{members}}" wx:key="_id">
				<view class="item card">
					<view class="title">{{item.name}}ï¼ˆ{{item.grade}}ï¼‰</view>
					<view class="meta">{{item.major}} Â· {{item.status}}</view>
					<view class="actions">
						<button size="mini" bindtap="approveMember" data-id="{{item._id}}">é€šè¿‡</button>
						<button size="mini" bindtap="rejectMember" data-id="{{item._id}}">æ‹’ç»</button>
						<button size="mini" class="danger" bindtap="removeMember" data-id="{{item._id}}">åˆ é™¤</button>
					</view>
				</view>
			</block>
		</view>
	</block>

	<block wx:if="{{tab==='banners'}}">
		<view class="toolbar">
			<button class="primary" bindtap="createBanner" style="width: 650rpx;">æ–°å¢è½®æ’­</button>
		</view>
		<view class="list">
			<block wx:for="{{banners}}" wx:key="_id">
				<view class="item banner-item card">
					<image class="thumb" src="{{item.image}}" mode="aspectFill" />
					<view class="banner-right">
						<view class="title ellipsis">{{item.title}}</view>
						<view class="meta">è·³è½¬ï¼š{{item.pagePath ? item.pagePath : (item.activityId ? ('æ´»åŠ¨ '+item.activityId) : 'æ— ')}} Â· é¡ºåºï¼š{{item.order}}</view>
						<view class="actions">
							<button size="mini" bindtap="editBanner" data-id="{{item._id}}">ç¼–è¾‘</button>
							<button size="mini" bindtap="changeBannerImage" data-id="{{item._id}}">ä¿®æ”¹å›¾ç‰‡</button>
							<button size="mini" class="danger" bindtap="deleteBanner" data-id="{{item._id}}">åˆ é™¤</button>
						</view>
					</view>
				</view>
			</block>
		</view>
	</block>
</view>