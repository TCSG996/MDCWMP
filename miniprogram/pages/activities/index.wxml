<!--pages/activities/index.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <input 
        class="search-input" 
        placeholder="æœç´¢æ´»åŠ¨" 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        bindconfirm="onSearchConfirm"
      />
      <text class="search-icon">ğŸ”</text>
    </view>
  </view>

  <!-- ç­›é€‰æ ‡ç­¾ -->
  <view class="filter-tabs">
    <view 
      wx:for="{{statusOptions}}" 
      wx:key="*this"
      class="filter-tab {{statusFilter === item ? 'active' : ''}}"
      bindtap="onStatusFilterChange"
      data-status="{{item}}"
    >
      {{item}}
    </view>
  </view>

  <!-- æ´»åŠ¨åˆ—è¡¨ -->
  <view class="activity-list">
    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{initialLoading}}" class="loading">
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view wx:elif="{{activities.length === 0 && !loading}}" class="empty-state">
      <text class="empty-icon">ğŸ“‹</text>
      <text>æš‚æ— æ´»åŠ¨</text>
    </view>
    
    <!-- æ´»åŠ¨å¡ç‰‡ -->
    <view wx:else class="activity-cards">
      <view 
        wx:for="{{activities}}" 
        wx:key="_id"
        class="activity-card"
        bindtap="onActivityTap"
        data-id="{{item._id}}"
      >
        <!-- æ´»åŠ¨å›¾ç‰‡ -->
        <image 
          class="activity-image" 
          src="{{item.image || '/images/default-goods-image.png'}}" 
          mode="aspectFill"
        ></image>
        
        <!-- æ´»åŠ¨ä¿¡æ¯ -->
        <view class="activity-info">
          <view class="activity-header">
            <text class="activity-title">{{item.title}}</text>
            <view class="activity-status {{item.status === 'è¿›è¡Œä¸­' ? 'ongoing' : item.status === 'å·²ç»“æŸ' ? 'ended' : 'upcoming'}}">
              {{item.status}}
            </view>
          </view>
          
          <view class="activity-details">
            <view class="detail-item">
              <text class="detail-icon">ğŸ•</text>
              <text class="detail-text">{{item.startTime}} - {{item.endTime}}</text>
            </view>
            <view class="detail-item" wx:if="{{item.location}}">
              <text class="detail-icon">ğŸ“</text>
              <text class="detail-text">{{item.location}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
    
    <!-- åŠ è½½æ›´å¤š -->
    <view wx:if="{{loading && !initialLoading}}" class="loading-more">
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <!-- æ²¡æœ‰æ›´å¤š -->
    <view wx:if="{{!hasMore && activities.length > 0}}" class="no-more">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
  </view>
</view> 