<!--index.wxml-->
<view class="container">
  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading">
    <text>加载中...</text>
  </view>
  
  <view wx:else>
    <!-- 社团简介区域 -->
    <view class="club-intro">
      <view class="club-header">
        <image class="club-logo" src="/images/avatar.jpg" mode="aspectFill"></image>
        <view class="club-info">
          <text class="club-name">{{clubInfo.name}}</text>
          <text class="club-desc">{{clubInfo.description}}</text>
        </view>
      </view>
      
      <!-- 数据统计 -->
      <view class="statistics">
        <view class="stat-item">
          <text class="stat-number">{{clubInfo.memberCount}}</text>
          <text class="stat-label">成员</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{clubInfo.activityCount}}</text>
          <text class="stat-label">活动</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{clubInfo.myRegistrationCount}}</text>
          <text class="stat-label">我的报名</text>
        </view>
      </view>
    </view>

    <!-- 轮播图区域 -->
    <view class="banner-section">
      <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="3000" duration="500">
        <swiper-item wx:for="{{bannerList}}" wx:key="id" bindtap="onBannerTap" data-index="{{index}}">
          <image class="banner-image" src="{{item.image}}" mode="aspectFill"></image>
          <view class="banner-title">{{item.title}}</view>
        </swiper-item>
      </swiper>
    </view>

    <!-- 快捷功能入口 -->
    <view class="quick-actions">
      <view class="section-title">快捷功能</view>
      <view class="action-grid">
        <view 
          wx:for="{{quickActions}}" 
          wx:key="id" 
          class="action-item"
          bindtap="onQuickActionTap"
          data-page="{{item.page}}"
        >
          <view class="action-icon" style="background-color: {{item.color}}">
            <image src="{{item.icon}}" mode="aspectFit"></image>
          </view>
          <text class="action-title">{{item.title}}</text>
        </view>
      </view>
    </view>

    <!-- 最新活动 -->
    <view class="latest-activities">
      <view class="section-title">最新活动</view>
      <view wx:if="{{latestActivities.length === 0}}" class="empty-state">
        <text>暂无活动</text>
      </view>
      <view wx:else class="activity-list">
        <view 
          wx:for="{{latestActivities}}" 
          wx:key="_id" 
          class="activity-item"
          bindtap="onActivityTap"
          data-id="{{item._id}}"
        >
          <view class="activity-content">
            <text class="activity-title">{{item.title}}</text>
            <text class="activity-time">{{item.startTime}}</text>
            <text class="activity-location">{{item.location}}</text>
          </view>
          <view class="activity-status {{item.status === '进行中' ? 'ongoing' : item.status === '已结束' ? 'ended' : 'upcoming'}}">
            {{item.status}}
          </view>
        </view>
      </view>
    </view>
  </view>
</view>