# 活动详情页面分享功能说明

## 功能概述

活动详情页面已集成完整的分享功能，支持多种分享方式，帮助用户快速分享活动信息。

## 分享方式

### 1. 分享给好友
- **触发方式**：点击右上角分享按钮
- **分享内容**：
  - 标题：活动标题
  - 描述：活动描述
  - 图片：活动图片（如果有）或默认分享图片
  - 链接：活动详情页面链接

### 2. 分享到朋友圈
- **触发方式**：点击右上角分享按钮，选择"分享到朋友圈"
- **分享内容**：
  - 标题：活动标题
  - 图片：活动图片（如果有）或默认分享图片
  - 链接：活动详情页面链接

### 3. 页面内分享按钮
- **位置**：活动详情页面中的"分享活动"区域
- **功能**：提供分享选项菜单
  - 分享给好友
  - 分享到朋友圈
  - 复制链接

## 技术实现

### 1. 分享配置

```javascript
// 分享给好友
onShareAppMessage() {
  const { activity } = this.data;
  return {
    title: activity.title,
    desc: activity.description,
    path: `/pages/activity-detail/index?id=${this.data.activityId}`,
    imageUrl: activity.images && activity.images.length > 0 ? activity.images[0] : '/images/share-default.png'
  };
}

// 分享到朋友圈
onShareTimeline() {
  const { activity } = this.data;
  return {
    title: activity.title,
    query: `id=${this.data.activityId}`,
    imageUrl: activity.images && activity.images.length > 0 ? activity.images[0] : '/images/share-default.png'
  };
}
```

### 2. 分享参数说明

| 参数 | 类型 | 说明 |
|------|------|------|
| title | String | 分享标题，显示活动名称 |
| desc | String | 分享描述，显示活动简介 |
| path | String | 分享链接，指向活动详情页 |
| imageUrl | String | 分享图片，优先使用活动图片 |
| query | String | 朋友圈分享参数 |

### 3. 分享链接格式

```
pages/activity-detail/index?id=活动ID
```

## 用户体验优化

### 1. 分享按钮设计
- 使用渐变背景色，突出显示
- 添加点击反馈效果
- 图标和文字组合，直观易懂

### 2. 分享提示
- 提供操作指引
- 说明分享方式
- 友好的用户提示

### 3. 分享内容优化
- 自动提取活动标题作为分享标题
- 使用活动描述作为分享描述
- 优先使用活动图片，提升吸引力

## 分享效果

### 分享给好友效果
- 在微信聊天中显示活动卡片
- 包含活动标题、描述和图片
- 点击可直接跳转到活动详情页

### 分享到朋友圈效果
- 在朋友圈显示活动信息
- 包含活动标题和图片
- 点击可查看活动详情

## 注意事项

### 1. 图片要求
- 分享图片建议尺寸：500x400px
- 支持JPG、PNG格式
- 图片大小不超过128KB

### 2. 链接处理
- 分享链接包含活动ID参数
- 确保链接可正常跳转
- 处理链接失效情况

### 3. 权限设置
- 确保小程序已开启分享功能
- 检查分享权限配置
- 测试分享功能是否正常

## 扩展功能

### 1. 分享统计
可以添加分享统计功能：
- 记录分享次数
- 统计分享来源
- 分析分享效果

### 2. 自定义分享
可以支持自定义分享内容：
- 用户自定义分享文案
- 选择分享图片
- 设置分享标签

### 3. 分享奖励
可以添加分享激励机制：
- 分享获得积分
- 分享解锁特权
- 分享抽奖活动

## 测试建议

1. **功能测试**
   - 测试分享给好友功能
   - 测试分享到朋友圈功能
   - 测试复制链接功能

2. **兼容性测试**
   - 测试不同微信版本
   - 测试不同设备类型
   - 测试网络环境

3. **用户体验测试**
   - 测试分享流程是否顺畅
   - 测试分享内容是否准确
   - 测试分享效果是否良好

## 常见问题

### Q: 分享图片不显示
A: 检查图片路径是否正确，确保图片可访问

### Q: 分享链接无法跳转
A: 检查页面路径是否正确，确保页面存在

### Q: 分享内容为空
A: 检查活动数据是否正常加载

### Q: 分享功能不可用
A: 检查小程序分享权限是否开启 